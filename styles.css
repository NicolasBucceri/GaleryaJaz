/* ===== Diseño Noir Glass + Masonry ===== */
:root{
  /* Paleta oscura y acentos cálidos */
  --bg:#0b0a10;
  --bg-2:#111117;
  --ink:#e9e7e4;       /* texto principal */
  --muted:#aaa7a3;
  --accent:#d9c9b9;    /* beige cálido */
  --ring:rgba(255,255,255,.12);
  --card-bg:rgba(255,255,255,.06);

  --r-xl:18px;
  --r-lg:14px;

  --gap:1rem;
  --pad:2rem;
  --speed:.28s;

  --shadow: 0 20px 40px rgba(0,0,0,.35), 0 2px 10px rgba(0,0,0,.25);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0; color:var(--ink); background: var(--bg);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  line-height:1.5;

  /* Fondo: gradientes suaves + leve viñeta */
  background-image:
    radial-gradient(900px 520px at 85% -10%, rgba(217,201,185,.18) 0%, transparent 60%),
    radial-gradient(800px 480px at -10% 30%, rgba(155,141,130,.10) 0%, transparent 55%),
    radial-gradient(1200px 660px at 120% 110%, rgba(255,255,255,.05) 0%, transparent 60%);
  background-attachment: fixed;
}

/* Header / Footer */
.site-header,.site-footer{
  text-align:center; padding: var(--pad) clamp(1rem,3vw,2rem);
}
h1{
  margin:.1rem 0 .4rem; font-weight:800; letter-spacing:.4px;
  font-size: clamp(2rem, 4vw, 3rem);
}
.subtitle{ color:var(--muted); margin:0; }

/* === Botón “llave” descarga PDF === */
.actions{
  margin-top: 1rem;
  display: flex;
  justify-content: center;
  gap: .75rem;
}
.btn{
  appearance: none;
  border: 1px solid var(--ring);
  background: color-mix(in srgb, #ffffff 12%, var(--bg-2));
  color: var(--ink);
  border-radius: 999px;
  padding: .72rem 1.1rem;
  font-weight: 700;
  letter-spacing: .3px;
  display: inline-flex;
  align-items: center;
  gap: .6rem;
  text-decoration: none;
  box-shadow: var(--shadow);
  transition: transform var(--speed) ease, background var(--speed) ease, border-color var(--speed) ease;
  backdrop-filter: blur(8px);
}
.btn:hover{
  transform: translateY(-2px);
  background: color-mix(in srgb, #ffffff 20%, var(--bg-2));
  border-color: color-mix(in srgb, var(--accent) 35%, transparent);
}
.btn:active{ transform: translateY(0); }
.btn .icon{
  width: 18px; height: 18px;
  fill: currentColor; display:block;
}

/* ===== Masonry (multicolumn) =====
   Alturas naturales, ritmo editorial sin JS extra.
*/
.gallery{
  width:min(1200px,92vw);
  margin: 0 auto var(--pad);
  column-width: 320px;       /* ancho sugerido de columna */
  column-gap: var(--gap);
}
@media (max-width: 720px){
  .gallery{ column-width: 240px; }
}

/* Tarjeta */
.card{
  display:block;
  /* compat break-inside para distintos navegadores */
  break-inside: avoid;
  -webkit-column-break-inside: avoid;
  page-break-inside: avoid;

  margin: 0 0 var(--gap);
  position: relative;
  border-radius: var(--r-xl);
  background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
  backdrop-filter: blur(6px);
  box-shadow: var(--shadow);
  border: 1px solid var(--ring);
  overflow: clip;
  transition: transform var(--speed) ease, box-shadow var(--speed) ease, border-color var(--speed) ease;
  isolation:isolate;

  /* Reserva de espacio + lazy seguro (evita saltos de layout) */
  content-visibility: auto;
  contain-intrinsic-size: 420px 560px; /* estimación; se ajusta con data-w/h */
}
.card[data-w][data-h]{
  /* Si JS setea data-w/data-h usa aspect-ratio exacto y quita estimación */
  aspect-ratio: attr(data-w number) / attr(data-h number);
  contain-intrinsic-size: auto;
}

.card::after{
  content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.18), inset 0 -1px 0 rgba(0,0,0,.18);
}

/* Medios (altura natural) */
.card img, .card video{
  display:block;
  width:100%;
  height:auto;
  object-fit: cover;
  /* sin transform inicial para no forzar repintados en el primer frame */
  transform: none;
  transition: transform var(--speed) ease, filter var(--speed) ease;
}

/* Hover */
.card:hover{
  transform: translateY(-4px);
  box-shadow: 0 28px 60px rgba(0,0,0,.45), 0 4px 16px rgba(0,0,0,.3);
  border-color: color-mix(in srgb, var(--accent) 40%, transparent);
}
.card:hover img, .card:hover video{
  transform: scale(1.04);
  filter: saturate(1.05) contrast(1.03);
}

/* Badge de play para videos (opcional en el grid) */
.play-badge{
  position:absolute; inset:auto auto 12px 12px;
  width:36px; height:36px; border-radius:999px;
  background: color-mix(in srgb, #ffffff 30%, var(--card-bg));
  border:1px solid var(--ring);
  box-shadow: var(--shadow);
}
.play-badge::before{
  content:""; position:absolute; left:13px; top:9px;
  border-style: solid;
  border-width: 8px 0 8px 12px;
  border-color: transparent transparent transparent var(--ink);
}

/* ===== Lightbox (oscuro con glass) ===== */
.lightbox{
  position:fixed; inset:0; display:grid; place-items:center;
  background: color-mix(in srgb, #000 78%, transparent);
  opacity:0; visibility:hidden; transition:opacity var(--speed) ease, visibility var(--speed) ease;
  z-index:50;
}
.lightbox.is-open{ opacity:1; visibility:visible; }

.lb-media > img, .lb-media > video{
  max-width:min(92vw,1200px);
  max-height:86vh;
  border-radius: var(--r-lg);
  background: var(--bg-2);
  border: 1px solid var(--ring);
  box-shadow: var(--shadow);
}

/* Botones lightbox */
.lb-btn{
  position:absolute; width:44px; height:44px; border-radius:999px;
  border:1px solid var(--ring);
  background: color-mix(in srgb, #ffffff 14%, var(--bg-2));
  color: var(--ink); cursor:pointer; display:grid; place-items:center;
  font-size:20px; backdrop-filter: blur(8px);
  transition: transform var(--speed) ease, background var(--speed) ease, border-color var(--speed) ease;
}
.lb-btn:hover{
  transform: scale(1.05);
  background: color-mix(in srgb, #ffffff 22%, var(--bg-2));
  border-color: color-mix(in srgb, var(--accent) 35%, transparent);
}
.lb-close{ top:24px; right:24px; }
.lb-prev{ left:24px; top:50%; transform:translateY(-50%); }
.lb-next{ right:24px; top:50%; transform:translateY(-50%); }

/* Motion-safe */
@media (prefers-reduced-motion: reduce){ *{ transition-duration:.001s !important; } }

/* Accesibilidad mínima */
img{ color:transparent; }

/* Soporte claro/oscuro opcional */
@media (prefers-color-scheme: light){
  :root{
    --bg:#f7f6f4; --bg-2:#ffffff; --ink:#0e0e10; --muted:#55524e;
    --ring:rgba(0,0,0,.12); --card-bg:rgba(0,0,0,.04);
  }
}
